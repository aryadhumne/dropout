<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Student Authentication</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

<style>
:root{
  --glass-bg: rgba(255,255,255,0.12);
  --glass-border: rgba(255,255,255,0.25);
  --neon-blue:#00e5ff;
  --neon-pink:#ff4ecd;
}

body{
  min-height:100vh;
  background: radial-gradient(circle at top, #1a2a6c, #000);
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:'Poppins',sans-serif;
  color:#fff;
}

.glass{
  background:var(--glass-bg);
  backdrop-filter: blur(18px);
  border-radius:20px;
  border:1px solid var(--glass-border);
  box-shadow:0 25px 60px rgba(0,0,0,0.6);
}

.page-title{
  font-size:2rem;
  font-weight:700;
  background:linear-gradient(45deg,var(--neon-blue),var(--neon-pink));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.form-control{
  background:rgba(255,255,255,0.1);
  border:none;
  color:#fff;
}

.form-control:focus{
  background:rgba(255,255,255,0.2);
  box-shadow:0 0 10px var(--neon-blue);
  color:#fff;
}

.btn-neon{
  background:linear-gradient(45deg,var(--neon-blue),var(--neon-pink));
  border:none;
  color:#000;
  font-weight:600;
}

.hidden{
  display:none;
}

.password-wrapper{
  position:relative;
}

.toggle-password{
  position:absolute;
  right:15px;
  top:50%;
  transform:translateY(-50%);
  cursor:pointer;
}

a{
  color:var(--neon-blue);
  cursor:pointer;
  text-decoration:none;
}
a:hover{
  color:var(--neon-pink);
}
</style>
</head>

<body>

<div class="container">
<div class="row justify-content-center">
<div class="col-lg-6 col-md-8">
<div class="glass p-5">

<!-- Flash Messages -->
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
  {% for category, message in messages %}
    <div class="alert alert-{{category}} alert-dismissible fade show" role="alert">
      {{message}}
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
  {% endfor %}
{% endif %}
{% endwith %}

<!-- ================= REGISTER ================= -->
<div id="registerForm">
  <h3 class="text-center mb-4 page-title">Student Registration</h3>

  <form method="POST" action="/student/register">

    <div class="mb-3">
      <label class="form-label">Full Name</label>
      <input type="text" name="name" class="form-control" required>
    </div>

    <div class="mb-3">
      <label class="form-label">Email</label>
      <input type="email" name="email" class="form-control" required>
    </div>

    <div class="mb-3 password-wrapper">
      <label class="form-label">Password</label>
      <input type="password" id="registerPassword" name="password" class="form-control" required>
      <i class="fa-solid fa-eye toggle-password"
         onclick="togglePassword('registerPassword', this)"></i>
    </div>

    <!-- âœ… NEW CONFIRM PASSWORD FIELD -->
    <div class="mb-4 password-wrapper">
      <label class="form-label">Confirm Password</label>
      <input type="password" id="confirmPassword" name="confirm_password" class="form-control" required>
      <i class="fa-solid fa-eye toggle-password"
         onclick="togglePassword('confirmPassword', this)"></i>
    </div>

    <button type="submit" class="btn btn-neon w-100">
      Register
    </button>
  </form>

  <div class="text-center mt-4">
    Already have an account?
    <a onclick="showLogin()">Login here</a>
  </div>
</div>

<!-- ================= LOGIN ================= -->
<div id="loginForm" class="hidden">
  <h3 class="text-center mb-4 page-title">Student Login</h3>

  <form method="POST" action="/student/login">

    <div class="mb-3">
      <label class="form-label">Email</label>
      <input type="email" name="email" class="form-control" required>
    </div>

    <div class="mb-2 password-wrapper">
      <label class="form-label">Password</label>
      <input type="password" id="loginPassword" name="password" class="form-control" required>
      <i class="fa-solid fa-eye toggle-password"
         onclick="togglePassword('loginPassword', this)"></i>
    </div>

    <button type="submit" class="btn btn-neon w-100 mt-3">
      Login
    </button>
  </form>

  <div class="text-center mt-4">
    Don't have an account?
    <a onclick="showRegister()">Register here</a>
  </div>
</div>

</div>
</div>
</div>
</div>

<script>
function showLogin(){
  document.getElementById("registerForm").classList.add("hidden");
  document.getElementById("loginForm").classList.remove("hidden");
}

function showRegister(){
  document.getElementById("loginForm").classList.add("hidden");
  document.getElementById("registerForm").classList.remove("hidden");
}

function togglePassword(fieldId, icon){
  const input = document.getElementById(fieldId);
  if(input.type === "password"){
    input.type = "text";
    icon.classList.remove("fa-eye");
    icon.classList.add("fa-eye-slash");
  } else {
    input.type = "password";
    icon.classList.remove("fa-eye-slash");
    icon.classList.add("fa-eye");
  }
}
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
